CREATE DATABASE project_xml;

use project_xml;

CREATE TABLE user (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255),
    password VARCHAR(255)
);

-- Table pour les réalisateurs des films (3NF)
CREATE TABLE directors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    director_name VARCHAR(255) UNIQUE
);

-- Table pour les langues des films (3NF)
CREATE TABLE languages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    language_name VARCHAR(50) UNIQUE
);

-- Table principale des films
CREATE TABLE movies (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255),
    duration INT,
    director_id INT,
    language_id INT,
    min_age INT,
    id_owner INT,
    FOREIGN KEY (director_id) REFERENCES directors(id),
    FOREIGN KEY (language_id) REFERENCES languages(id),
    FOREIGN KEY (id_owner) REFERENCES user(id)
);
-- Table pour les acteurs des films (1NF)
CREATE TABLE movie_actors (
    movie_id INT,
    actor VARCHAR(255),
    FOREIGN KEY (movie_id) REFERENCES movies(id)
);

-- Table pour le calendrier des films (2NF)
CREATE TABLE movie_schedule (
    id INT AUTO_INCREMENT PRIMARY KEY,
    movie_id INT,
    startDate DATE,
    endDate DATE,
    daysMWF BOOLEAN,
    daysTTS BOOLEAN,
    daysTFS BOOLEAN,
    startTime TIME,
    adresse_cinema VARCHAR(255),
    FOREIGN KEY (movie_id) REFERENCES movies(id)
);

-- Populate the DB

-- Remplir la table `user` avec 5 utilisateurs
insert into user (username, password) values("alex", "alexalex");
insert into user (username, password) values("clara", "claraclara");
insert into user (username, password) values("max", "maxmax");
insert into user (username, password) values("antoine", "antoineantoine");
insert into user (username, password) values("come", "comecome");

-- Remplir la table `directors` avec 3 réalisateurs
INSERT INTO directors (director_name) VALUES
('Christopher Nolan'),
('Quentin Tarantino'),
('Greta Gerwig');

-- Remplir la table `languages` avec 3 langues
INSERT INTO languages (language_name) VALUES
('English'),
('French'),
('Spanish');

-- Remplir la table `movies` avec 4 films
INSERT INTO movies (title, duration, director_id, language_id, min_age, id_owner) VALUES
('Inception', 148, 1, 1, 13, 1),
('Pulp Fiction', 154, 2, 2, 18, 1),
('Lady Bird', 94, 3, 2, 16, 2),
('La La Land', 128, 3, 1, 10, 2);

-- Remplir la table `movie_actors` avec 6 acteurs pour les 4 films
INSERT INTO movie_actors (movie_id, actor) VALUES
(1, 'Leonardo DiCaprio'),
(1, 'Joseph Gordon-Levitt'),
(2, 'John Travolta'),
(2, 'Samuel L. Jackson'),
(3, 'Saoirse Ronan'),
(4, 'Ryan Gosling');

-- Remplir la table `movie_schedule` avec des horaires pour les 4 films
INSERT INTO movie_schedule (movie_id, startDate, endDate, daysMWF, daysTTS, daysTFS, startTime, adresse_cinema) VALUES
(1, '2023-10-01', '2023-10-15', 1, 0, 0, '18:30:00', 'Cinema Paris 1'),
(2, '2023-10-05', '2023-10-20', 0, 1, 0, '19:00:00', 'Cinema Paris 2'),
(3, '2023-10-10', '2023-10-24', 1, 0, 0, '20:00:00', 'Cinema Paris 3'),
(4, '2023-10-15', '2023-10-29', 0, 1, 0, '16:45:00', 'Cinema Paris 4');
